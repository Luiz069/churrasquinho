<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CardÃ¡pio Digital - Lanchonete</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>

  <body>
    <!-- ========================================================= -->
    <!-- TOPO -->
    <header>
      <h1>LANCHONETE</h1>
      <p>PeÃ§a e receba em casa ou na mesa!</p>

      <div
        style="
          display: flex;
          gap: 10px;
          justify-content: center;
          flex-wrap: wrap;
        "
      >
        <a href="historico.html">
          <button>HistÃ³rico</button>
        </a>

        <button onclick="sair()" class="btn-logout">ğŸšª Sair</button>
      </div>
    </header>

    <!-- ========================================================= -->
    <!-- MODAL HISTÃ“RICO -->
    <div id="modalHistorico" class="modal" style="display: none">
      <div class="modal-content">
        <h2>ğŸ“‹ Meus Pedidos</h2>
        <div id="listaHistorico"></div>
        <button onclick="fecharHistorico()">Fechar</button>
      </div>
    </div>

    <!-- ========================================================= -->
    <!-- MODAL PRODUTO -->
    <div id="modalItem" class="modal">
      <div class="modal-content">
        <h2 id="m-nome" style="color: var(--vermelho); margin: 0">Nome</h2>
        <p id="m-desc" style="color: #666; font-size: 0.9rem">DescriÃ§Ã£o</p>

        <label><b>Quantidade:</b></label>
        <div class="qtd-control" style="margin: 10px 0">
          <button class="btn-qtd" onclick="mudarQtdModal(-1)">-</button>
          <span id="m-qtd-val">1</span>
          <button class="btn-qtd" onclick="mudarQtdModal(1)">+</button>
        </div>

        <div class="adicionais-container">
          <p><b>Adicionais:</b></p>

          <div class="add-item-row">
            <span>Queijo Extra (+ R$ 3,00)</span>
            <div class="qtd-control">
              <button onclick="mudarAdd('queijo', -1)">-</button>
              <span id="qtd-add-queijo">0</span>
              <button onclick="mudarAdd('queijo', 1)">+</button>
            </div>
          </div>

          <div class="add-item-row">
            <span>Ovo Extra (+ R$ 2,00)</span>
            <div class="qtd-control">
              <button onclick="mudarAdd('ovo', -1)">-</button>
              <span id="qtd-add-ovo">0</span>
              <button onclick="mudarAdd('ovo', 1)">+</button>
            </div>
          </div>

          <div class="add-item-row">
            <span>Carne Extra (+ R$ 8,00)</span>
            <div class="qtd-control">
              <button onclick="mudarAdd('carne', -1)">-</button>
              <span id="qtd-add-carne">0</span>
              <button onclick="mudarAdd('carne', 1)">+</button>
            </div>
          </div>
        </div>

        <label><b>ObservaÃ§Ãµes</b></label>
        <textarea id="m-obs" rows="2"></textarea>

        <div class="subtotal-tag">
          Subtotal: R$ <span id="m-subtotal">0,00</span>
        </div>

        <button class="btn-add-main" onclick="addAoCarrinho()">
          âœ… Adicionar ao Carrinho
        </button>

        <button onclick="fecharModal()">Cancelar</button>
      </div>
    </div>

    <!-- ========================================================= -->
    <!-- CARDÃPIO -->
    <div class="container">
      <div class="categoria-box">
        <h3 style="color: var(--vermelho)">ğŸ” HambÃºrgueres</h3>

        <div class="item">
          <div class="item-row">
            <span>X-Tudo Especial</span>
            <span>R$ 25,00</span>
          </div>

          <p style="font-size: 14px; color: #666">
            PÃ£o, carne, queijo, presunto, ovo, bacon e salada.
          </p>

          <button
            class="btn-add-main"
            onclick="
              abrirModal(
                'X-Tudo Especial',
                25,
                'PÃ£o, carne, queijo, presunto, ovo, bacon e salada.',
              )
            "
          >
            Adicionar
          </button>
        </div>
      </div>
    </div>

    <!-- ========================================================= -->
    <!-- CARRINHO -->
    <div id="cartSidebar" class="cart-sidebar">
      <h2 style="color: var(--vermelho)">ğŸ›’ Seu Carrinho</h2>

      <div id="lista-carrinho"></div>

      <div style="font-size: 22px; font-weight: bold; margin: 20px 0">
        Total: R$ <span id="total-final">0,00</span>
      </div>

      <input type="text" id="c-nome" placeholder="Seu nome completo *" />
      <input type="text" id="c-numero" placeholder="Seu nÃºmero *" />
      <textarea
        id="c-obs"
        placeholder="ObservaÃ§Ãµes gerais do pedido"
      ></textarea>

      <select id="c-pagto">
        <option value="Dinheiro">Dinheiro</option>
        <option value="Pix">Pix</option>
        <option value="CartÃ£o">CartÃ£o</option>
      </select>

      <button class="btn-add-main" onclick="finalizarPedido()">
        ğŸ“² Finalizar Pedido
      </button>

      <button onclick="toggleCart()">Voltar</button>
    </div>

    <div class="footer-btn">
      <button class="btn-carrinho" onclick="toggleCart()">
        ğŸ›’ Carrinho (<span id="cart-count">0</span>)
      </button>
    </div>

    <!-- MODAL HISTÃ“RICO -->
    <div
      id="modalHistorico"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        justify-content: center;
        align-items: center;
        z-index: 9999;
      "
    >
      <div
        style="
          background: white;
          width: 90%;
          max-width: 500px;
          max-height: 80vh;
          overflow-y: auto;
          border-radius: 12px;
          padding: 20px;
          position: relative;
        "
      >
        <h2>ğŸ“œ Meu HistÃ³rico</h2>

        <div id="listaHistorico"></div>

        <button
          onclick="fecharHistorico()"
          style="
            margin-top: 15px;
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
          "
        >
          Fechar
        </button>
      </div>
    </div>

    <!-- ========================================================= -->
    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script src="js/script.js"></script>
  </body>
</html>
